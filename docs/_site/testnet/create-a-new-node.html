<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Create a New Node - Obscuro</title>
<meta name="description" content="Obscuro is an Ethereum-compatible confidential smart contract L2 network.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_UK">
<meta property="og:site_name" content="Obscuro">
<meta property="og:title" content="Create a New Node">
<meta property="og:url" content="https://obscu.ro/testnet/create-a-new-node.html">


  <meta property="og:description" content="Obscuro is an Ethereum-compatible confidential smart contract L2 network.">












<link rel="canonical" href="https://obscu.ro/testnet/create-a-new-node.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Obscuro",
      "url": "https://obscu.ro/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Obscuro
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">What is Obscuro?</span>
        

        
        <ul>
          
            <li><a href="/what-is-obscuro/privacy-matters.html">Privacy Matters</a></li>
          
            <li><a href="/what-is-obscuro/technology.html">Technology</a></li>
          
            <li><a href="/what-is-obscuro/user-experience.html">User Experience</a></li>
          
            <li><a href="/what-is-obscuro/tokens.html">Tokens</a></li>
          
            <li><a href="/what-is-obscuro/community.html">Community</a></li>
          
            <li><a href="/what-is-obscuro/roadmap.html">Roadmap</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Community</span>
        

        
        <ul>
          
            <li><a href="/community/contributions.html">Contributing to Obscuro</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Obscuro Testnet</span>
        

        
        <ul>
          
            <li><a href="/testnet/Introduction.html">Introduction</a></li>
          
            <li><a href="/testnet/essentials.html">Essential Information</a></li>
          
            <li><a href="/testnet/deploying-a-smart-contract.html">Deploying a Smart Contract</a></li>
          
            <li><a href="/testnet/wallet-extension.html">Wallet Extension</a></li>
          
            <li><a href="/testnet/troubleshooting.html">Troubleshooting</a></li>
          
            <li><a href="/testnet/changelog.html">Change Log</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Whitepaper</span>
        

        
        <ul>
          
            <li><a href="/obscuro-whitepaper/abstract.html">Abstract</a></li>
          
            <li><a href="/obscuro-whitepaper/motivation.html">Motivation</a></li>
          
            <li><a href="/obscuro-whitepaper/challenges.html">Challenges</a></li>
          
            <li><a href="/obscuro-whitepaper/technical-background.html">Technical Background</a></li>
          
            <li><a href="/obscuro-whitepaper/high-level-design.html">High Level Design</a></li>
          
            <li><a href="/obscuro-whitepaper/consensus.html">Consensus</a></li>
          
            <li><a href="/obscuro-whitepaper/detailed-design.html">Detailed Design</a></li>
          
            <li><a href="/obscuro-whitepaper/fees-rewards.html">Fees and Rewards</a></li>
          
            <li><a href="/obscuro-whitepaper/obscuro-ethereum-interaction.html">Obscuro-Ethereum Interaction</a></li>
          
            <li><a href="/obscuro-whitepaper/threat-model.html">Threat Model</a></li>
          
            <li><a href="/obscuro-whitepaper/tokenomics.html">Tokenomics</a></li>
          
            <li><a href="/obscuro-whitepaper/governance.html">Governance</a></li>
          
            <li><a href="/obscuro-whitepaper/appendix.html">Appendix</a></li>
          
            <li><a href="/obscuro-whitepaper/amalgamated.html">All-in-one</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tokenomics</span>
        

        
        <ul>
          
            <li><a href="/tokenomics/overview.html">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            <li><a href="https://obscu.ro">Obscuro Home</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Create a New Node">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Create a New Node
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Follow the steps below to create a new Obscuro node using Docker and join the Obscuro Testnet.</p>

<p>Obscuro makes use of Intel’s Software Guard Extension (SGX) capability to achieve full computational privacy (see the <a href="https://whitepaper.obscu.ro">Obscuro Whitepaper</a> for full details). As a result there are some hardware compatibility requirements and the Intel SGX driver and SGX Platform Software (PSW) has to be installed.</p>

<p>An attestation process initiated when the node wants to join the Obscuro testnet verifies the node is running a genuine SGX enclave and that it is patched and not vulnerable to any known exploits. The steps below include a means of checking the outcome of the attestation process to avoid a failure at the point of joining the Testnet.</p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>Ubuntu 18.04</li>
  <li>URL to the most recent SGX driver .bin file, available from https://download.01.org/intel-sgx/sgx-linux/. For example https://download.01.org/intel-sgx/sgx-linux/2.16/distro/ubuntu18.04-server/sgx_linux_x64_driver_2.11.054c9c4c.bin</li>
</ul>

<p>Either,</p>
<ul>
  <li>Computer hardware running an Intel Xeon CPU with Intel SGX capability (use <a href="https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873">Intel’s Production Specification advanced search page</a> to confirm compatible processors)</li>
  <li>Enable Intel Software Guard Extension in the BIOS menu</li>
  <li>Disable Secure Boot in the BIOS menu</li>
</ul>

<p>Or,</p>
<ul>
  <li>Azure Confidential Computing virtual machine. By default these use Intel SGX capable processors.</li>
</ul>

<h1 id="joining-testnet-as-an-aggregator-node">Joining Testnet as an Aggregator Node</h1>
<h2 id="install-sgx">Install SGX</h2>
<ol>
  <li>
    <p>Update the system and install required components:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo apt update
  sudo apt upgrade
  sudo apt-get install make gcc wget
</code></pre></div>    </div>
  </li>
  <li>
    <p>Download SGX driver:</p>

    <p><code class="language-plaintext highlighter-rouge">wget "&lt;the URL recorded as part of prerequisites above&gt;"</code></p>
  </li>
  <li>
    <p>Set protections to allow for the .bin file execution:</p>

    <p><code class="language-plaintext highlighter-rouge">chmod +x sgx_linux_x64_driver_&lt;driver version taken from driver download URL&gt;.bin</code></p>
  </li>
  <li>
    <p>Install the driver:</p>

    <p><code class="language-plaintext highlighter-rouge">sudo ./sgx_linux_x64_driver_&lt;driver version taken from driver download URL&gt;.bin</code></p>
  </li>
  <li>
    <p>Create or update remount-dev-exec.service to remove /dev as exec and at system startup:</p>

    <p><code class="language-plaintext highlighter-rouge">sudo nano /etc/systemd/system/remount-dev-exec.service</code></p>

    <p>Paste in the following and press Ctrl+O to write the contents and Ctrl+X to exit nano</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       [Unit]
       Description=Remount /dev as exec to allow AESM service to boot and load enclaves into SGX

       [Service]
       Type=oneshot
       ExecStart=/bin/mount -o remount,exec /dev
       RemainAfterExit=true

       [Install]
       WantedBy=multi-user.target
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo systemctl enable remount-dev-exec
  sudo systemctl start remount-dev-exec
</code></pre></div>    </div>
  </li>
  <li>
    <p>Configure the system to run an Intel SGX application:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo 'deb [arch=amd64] https://download.01.org/intelsgx/sgx_repo/ubuntu bionic main' | sudo tee /etc/apt/sources.list.d/intel-sgx.list
  wget -qO - https://download.01.org/intelsgx/sgx_repo/ubuntu/intel-sgx-deb.key | sudo apt-key add
  sudo apt update
  sudo apt-get install libsgx-epid libsgx-quote-ex libsgx-dcap-ql libsgx-enclave-common libsgx-urts sgx-aesm-service libsgx-uae-service autoconf libtool libprotobuf-dev
</code></pre></div>    </div>
    <h2 id="verify-your-sgx-installation">Verify Your SGX Installation</h2>
    <p><em>PLACEHOLDER</em></p>
  </li>
</ol>

<h2 id="install-docker">Install Docker</h2>
<p>Before you install Docker Engine for the first time you need to set up the Docker repository.</p>

<h3 id="set-up-the-repository">Set up the repository</h3>
<ol>
  <li>Update the <code class="language-plaintext highlighter-rouge">apt</code> package index and install packages to allow <code class="language-plaintext highlighter-rouge">apt</code> to use a repository over HTTPS:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo apt-get update
  sudo apt-get install ca-certificates curl gnupg lsb-release
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add Docker’s official GPG key:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo mkdir -p /etc/apt/keyrings
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</code></pre></div>    </div>
  </li>
  <li>Use the following command to set up the repository:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="install-docker-engine">Install Docker Engine</h3>
<ol>
  <li>Update the <code class="language-plaintext highlighter-rouge">apt</code> package index, and install the latest version of Docker Engine, containered, and Docker Compose, or go to the next step to install a specific version:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  sudo apt-get update
  sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre></div>    </div>
  </li>
  <li>
    <p>To install a specific version of Docker Engine, list the available versions in the repo, then select and install:</p>

    <p>a. List the versions available in your repo:</p>

    <p><code class="language-plaintext highlighter-rouge">apt-cache madison docker-ce</code></p>

    <p>b. Install a specific version using the version string from the second column, for example, <code class="language-plaintext highlighter-rouge">5:20.10.16~3-0~ubuntu-jammy</code>.</p>

    <p><code class="language-plaintext highlighter-rouge">sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io docker-compose-plugin</code></p>
  </li>
  <li>
    <p>Verify that Docker Engine is installed correctly by running the hello-world image.</p>

    <p><code class="language-plaintext highlighter-rouge">sudo docker run hello-world</code></p>
  </li>
</ol>

<p>This command downloads a test image and runs it in a container. When the container runs, it prints a message and exits.</p>

<p>Docker Engine is installed and running. The <code class="language-plaintext highlighter-rouge">docker</code> group is created but no users are added to it. You need to use <code class="language-plaintext highlighter-rouge">sudo</code> to run Docker commands.</p>

<h2 id="start-edgeless-database">Start Edgeless Database</h2>
<ol>
  <li>
    <p>Run EdgelessDB on an SGX-capable system:</p>

    <p><code class="language-plaintext highlighter-rouge">docker run --name my-edb -p3306:3306 -p8080:8080 --privileged -v /dev/sgx:/dev/sgx -t ghcr.io/edgelesssys/edgelessdb-sgx-1gb</code></p>
  </li>
</ol>

<h2 id="start-enclave">Start Enclave</h2>
<ol>
  <li>
    <p>Create a Dockerfile so the Docker image can be created:</p>

    <p><code class="language-plaintext highlighter-rouge">sudo nano enclave.Dockerfile</code></p>

    <p>Paste in the following and press Ctrl+O to write the contents and Ctrl+X to exit nano</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  FROM ghcr.io/edgelesssys/ego-dev:latest

  RUN git clone https://github.com/obscuronet/go-obscuro
  RUN cd go-obscuro/go/obscuronode/enclave/main &amp;&amp; ego-go build &amp;&amp; ego sign main

  ENV OE_SIMULATION=1
  ENTRYPOINT ["ego", "run", "go-obscuro/go/obscuronode/enclave/main/main"]
  EXPOSE 11000
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a Docker image for the enclave service to run in SGX:</p>

    <p><code class="language-plaintext highlighter-rouge">sudo docker build -t obscuro_enclave -f enclave.Dockerfile .</code></p>
  </li>
  <li>
    <p>Run the Docker image as a container where <code class="language-plaintext highlighter-rouge">XXX</code> is the port on which to expose the enclave service’s RPC endpoints on the local machine, and <code class="language-plaintext highlighter-rouge">YYY</code> is the public IP address of your node:</p>

    <p><code class="language-plaintext highlighter-rouge">sudo docker run -e OE_SIMULATION=0 --privileged -v /dev/sgx:/dev/sgx -p XXX:11000/tcp obscuro_enclave --hostID YYY --address :11000 --willAttest=true</code></p>
  </li>
</ol>

<h2 id="start-host">Start Host</h2>
<p><em>PLACEHOLDER</em></p>

<h2 id="join-your-node-to-obscuro-testnet">Join Your Node to Obscuro Testnet</h2>
<p><em>PLACEHOLDER</em></p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/obscuronet" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/obscuronet" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://discord.gg/7pkKv2Tyfn" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-discord" aria-hidden="true"></i> Discord</a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Obscuro. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
